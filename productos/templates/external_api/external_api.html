{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block content %}

<div class="container shadow p-4 rounded mt-5" style="background:white; max-width: 800px;">

    <h2 class="text-center mb-4" style="font-family: 'Playfair Display'; color: var(--mahogany);">
        Consumir servicio externo
    </h2>

    <!-- FORMULARIO -->
    <form method="POST" class="mb-4">
        {% csrf_token %}

        <div class="mb-3">
            <label class="form-label fw-bold" style="color: var(--mahogany);">URL del servicio:</label>
            {{ form.url|add_class:"form-control" }}
        </div>

        <button type="submit" class="btn btn-primary w-100" 
                style="background: var(--tobacco); border: none;">
            Consultar
        </button>
    </form>

    <!-- ERRORES -->
    {% if error %}
        <div class="alert alert-danger">
            {{ error }}
        </div>
    {% endif %}

    <!-- RESPUESTA JSON -->
    {% if data %}
        <h4 class="mt-4" style="color: var(--mahogany); font-weight:600;">Resultado:</h4>
        <pre class="p-3 rounded" 
             style="background: var(--sand); color: var(--mahogany); white-space: pre-wrap;">
{{ data|safe }}
        </pre>
    {% endif %}

</div>

{% endblock %}